{% extends "base.html" %}

{% block title %}Password Reset{% endblock %}

{% block content %}
<div class="row">
    <div class="page-header col-md-4 col-md-push-4">
        <h3>Reset Your Password</h3>
    </div>
</div>
<div class="row">
    <form id="reset-password-form" class="col-md-4 col-md-push-4" action="{{ url_for('auth.password_reset', token=token) }}" method="POST">
        <div id="reset-password-email" class="form-group">
            <label>Email:</label>
            <input type="email" class="form-control" name="email" placeholder="enter your email">
        </div>
        <div id="reset-password1" class="form-group">
            <label>Password:</label>
            <input type="password" class="form-control" name="password" placeholder="enter new password">
        </div>
        <div id="reset-password2" class="form-group">
            <label>Password:</label>
            <input type="password" class="form-control" name="password2" placeholder="repeat your new password">
        </div>
        <button type="submit" class="btn btn-block btn-success" disabled>reset password</button>
    </form>
</div>
{% endblock %}

{% block scripts %}
<script>
    $(document).ready(function() {
        var listener = new SignUpButtonListener('#reset-password-form');
        listener.addSources([
            '#reset-password1',
            '#reset-password2'
        ]);
        // decorate "make" method by the listener
        var current = Notification.prototype.make;
        Notification.prototype.make = function() {
            current.apply(this, arguments);
            listener.check();
        }
        var passwords = new Passwords('div#reset-password1', 'div#reset-password2');
        passwords.run();
    });
</script>

{% endblock %}


{% macro create_tasks_area(tabs_tasks) %}
    {% for tab, tasks in tabs_tasks %}
        {% if tab.is_active() %}
            <div id="tab{{ tab.id }}" class="tab-pane fade in active col-md-10">
        {% else %}
            <div id="tab{{ tab.id }}" class="tab-pane fade col-md-10">
        {% endif %}
                <div class="tasks connected-sortable row">
                    {% for task in tasks %}
                        {{ create_task_item(task) }}
                    {% endfor %}
                </div>
            </div>
    {% endfor %}
{% endmacro %}


{% macro create_task_item(task) %}
    {% if task.is_active() %}
        {% set left_percents = task.count_left_time() / task.time_loop * 100 %}
        {% if left_percents < 0 %}
            {% set left_percents = 0 %}
        {% endif %}
        <div class="col-md-12">
            <div id="task{{ task.id }}" class="task well well-sm">
                <div class="task-complete">
                    <i class="fa fa-check-circle"></i>
                </div>
                <div class="task-draggable-area">
                    <i class="fa fa-ellipsis-v"></i>
                </div>
                <div class="task-name">
                    <span class="moved-text" contenteditable="true">{{ task.name }}</span>
                    <i class="fa fa-times" style="display: none"></i>
                </div>
                <!--
                <div class="task-progress">
                    <div class="progress-bar" style="width: {{ left_percents }}%"
                         data-left-time="{{ task.count_left_time() }}"></div>
                </div>
                -->
            </div>
        </div>
    {% endif %}
{% endmacro %}


{% macro create_tabs(tabs) %}
    {% for tab in tabs %}
        {% if tab.is_active() %}
            <a class="btn btn-inverse active" data-toggle="tab" href="#tab{{ tab.id }}">
                <div>
                    <input type="radio" name="options" autocomplete="off" checked>
        {% else %}
            <a class="btn btn-inverse" data-toggle="tab" href="#tab{{ tab.id }}">
                <div>
                    <input type="radio" name="options" autocomplete="off">
        {% endif %}
                    <span class="place-holder">{{ tab.name }}</span>
                    <span class="moved-text" contenteditable="true">{{ tab.name }}</span>
                    <i class="fa fa-times" style="display: none"></i>
                </div>
            </a>
    {% endfor %}
{% endmacro %}
